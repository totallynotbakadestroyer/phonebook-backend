(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{23:function(e,n,t){},41:function(e,n,t){"use strict";t.r(n);var c=t(0),o=t(1),r=t.n(o),a=t(16),i=t.n(a),u=(t(23),t(17)),s=t(3),d=function(e){var n=e.filterName,t=e.handleFilterChange;return Object(c.jsxs)("div",{children:["filter shown with",Object(c.jsx)("input",{value:n,onChange:t})]})},f=function(e){var n=e.newName,t=e.addName,o=e.newNumber,r=e.handleNameChange,a=e.handlePhoneChange;return Object(c.jsx)("div",{children:Object(c.jsxs)("form",{children:[Object(c.jsxs)("div",{children:["name: ",Object(c.jsx)("input",{value:n,onChange:r})]}),Object(c.jsxs)("div",{children:["number: ",Object(c.jsx)("input",{value:o,onChange:a})]}),Object(c.jsx)("div",{children:Object(c.jsx)("button",{onClick:t,type:"submit",children:"add"})})]})})},l=function(e){var n=e.person,t=e.deletePerson;return Object(c.jsx)("div",{children:Object(c.jsxs)("p",{children:[n.name," ",n.number,Object(c.jsx)("button",{onClick:function(){return t(n)},children:"delete"})]},n.name)})},h=function(e){var n=e.personsToShow,t=e.deletePerson;return Object(c.jsx)("div",{children:n.map((function(e){return Object(c.jsx)(l,{deletePerson:t,person:e},e.id)}))})},j=t(5),b=t.n(j),m="/api/persons",O=function(){return b.a.get(m).then((function(e){return e.data}))},v=function(e){return b.a.post(m,e).then((function(e){return e.data}))},p=function(e){return b.a.delete("".concat(m,"/").concat(e.id))},x=function(e,n){return b.a.put("".concat(m,"/").concat(e),n).then((function(e){return e.data}))},g=function(e){var n=e.notification;return null===n?null:Object(c.jsx)("div",{className:n.type,children:n.message})},w=function(){var e=Object(o.useState)([]),n=Object(s.a)(e,2),t=n[0],r=n[1],a=Object(o.useState)(""),i=Object(s.a)(a,2),l=i[0],j=i[1],b=Object(o.useState)(""),m=Object(s.a)(b,2),w=m[0],C=m[1],y=Object(o.useState)(""),N=Object(s.a)(y,2),k=N[0],P=N[1],S=Object(o.useState)({}),I=Object(s.a)(S,2),F=I[0],T=I[1],L=function(e,n){T({message:e,type:n}),setTimeout((function(){T(null)}),5e3)},D=function(e,n){window.confirm("".concat(l," is already added to phonebook, replace the old number with a new one?"))&&(j(""),C(""),x(e,n).then((function(e){var c=Object(u.a)(t);console.log(e),c[c.findIndex((function(n){return n.name===e.name}))]=e,L("Information of ".concat(n.name," has been successfully updated"),"success"),r(c)})).catch((function(){L("Information of ".concat(n.name," has already been removed from server"),"error"),r(t.filter((function(e){return e.name!==n.name})))})))};Object(o.useEffect)((function(){O().then((function(e){return r(e)}))}),[]);var B=k?t.filter((function(e){return e.name.toLowerCase().startsWith(k.toLowerCase())})):t;return Object(c.jsxs)("div",{children:[Object(c.jsxs)("div",{children:[Object(c.jsx)("h2",{children:"Phonebook"}),Object(c.jsx)(g,{notification:F}),Object(c.jsx)(d,{handleFilterChange:function(e){P(e.target.value)},filterName:k})]}),Object(c.jsxs)("div",{children:[Object(c.jsx)("h2",{children:"add a new"}),Object(c.jsx)(f,{addName:function(e){e.preventDefault();var n={name:l,number:w};t.some((function(e){return e.name===l&&e.number===w}))?alert("".concat(l," is already added to phonebook")):t.some((function(e){return e.name===l}))?D(t.find((function(e){return e.name===l})).id,n):(j(""),C(""),v(n).then((function(e){L("".concat(n.name," has been successfully added to phonebook"),"success"),r(t.concat(e))})).catch((function(){L("Information of ".concat(n.name," has already been removed from server"),"error"),r(t.filter((function(e){return e.name!==n.name})))})))},handleNameChange:function(e){j(e.target.value)},handlePhoneChange:function(e){C(e.target.value)},newName:l,newNumber:w})]}),Object(c.jsx)("h2",{children:"Numbers"}),Object(c.jsx)(h,{deletePerson:function(e){window.confirm("Delete ".concat(e.name,"?"))&&p(e).then((function(){L("Information of ".concat(e.name," has been successfully deleted"),"success"),r(t.filter((function(n){return n.id!==e.id})))})).catch((function(){L("Information of ".concat(e.name," has already been removed from server"),"error"),r(t.filter((function(n){return n.name!==e.name})))}))},personsToShow:B})]})},C=function(e){e&&e instanceof Function&&t.e(3).then(t.bind(null,42)).then((function(n){var t=n.getCLS,c=n.getFID,o=n.getFCP,r=n.getLCP,a=n.getTTFB;t(e),c(e),o(e),r(e),a(e)}))};i.a.render(Object(c.jsx)(r.a.StrictMode,{children:Object(c.jsx)(w,{})}),document.getElementById("root")),C()}},[[41,1,2]]]);
//# sourceMappingURL=main.e57e5f7a.chunk.js.map